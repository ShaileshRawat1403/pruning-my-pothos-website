---
import { slugifyTag } from '@/utils/tags';

interface Props {
  tags?: string[];
  label?: string;
}

const { tags = [], label = 'Related tags' } = Astro.props;
const cleanedTags = tags.map(tag => tag.trim()).filter(Boolean);
---
{cleanedTags.length > 0 && (
  <div class="tag-block">
    <span class="tag-label">{label}</span>
    <ul class="tag-list" aria-label={label}>
      {cleanedTags.map((tag) => (
        <li>
          <a class="tag-chip" href={`/tags/${slugifyTag(tag)}`}>{tag}</a>
        </li>
      ))}
    </ul>
  </div>
)}

<style>
  .tag-block {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin: 1.5rem 0 2rem;
  }
  .tag-label {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--color-text-muted);
  }
  .tag-list {
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding: 0;
    margin: 0;
  }
  .tag-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.3rem 0.7rem;
    border-radius: 999px;
    border: 1px solid var(--color-border);
    background: var(--color-blockquote-bg);
    color: var(--color-text-body);
    font-family: var(--font-mono);
    font-size: 0.75rem;
    text-decoration: none;
  }
  .tag-chip:hover {
    border-color: color-mix(in srgb, var(--color-accent) 40%, var(--color-border));
    color: var(--color-text-heading);
  }
</style>
