---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import SystemsList from '@/components/SystemsList.astro';
import { systemCategories } from '../../utils/systemCategories';

const category = systemCategories.find((item) => item.slug === 'how-things-fit-together');
if (!category) {
  throw new Error('Systems category not found: how-things-fit-together');
}
const systems = await getCollection('systems', ({ data }) => data.category === category.title);
---
<Layout title={`Systems | ${category.title}`}>
  <a class="category-back" href="/systems">Back to /systems</a>
  <div class="section-head section-head--centered">
    <h1>{category.title}</h1>
    <p class="mode-line">{category.description}</p>
  </div>

  <SystemsList items={systems} tone={category.tone} columns={2} />
</Layout>

<style>
  .category-back {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--font-mono);
    font-size: 0.9rem;
    margin-bottom: 1.5rem;
    color: var(--color-text-muted);
    text-decoration: none;
  }
  .category-back:hover {
    color: var(--color-text-body);
  }
</style>
